<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Hangman player">
	<title>Hangman</title>

	<script>
		/**
		 * A script for a loading veil
		 * @author Vera Konigin vera@groundedwren.com
		 * https://groundedwren.neocities.org
		 */
		window.GW = window.GW || {};
		window.GW.Controls = window.GW.Controls || {};
		(function Veil(ns) {
			ns.DeferKeys = {"DOMContentLoaded": true};
			
			/**
			 * Defers the lowering of the veil until a key is cleared
			 * @param {string} key The defer key to keep the veil up
			 */
			ns.addDefer = function addDefer(key) {
				ns.DeferKeys[key] = true;
			}
			
			/**
			 * Marks a defer key as complete and clears the veil if no remain
			 * @param {string} key The key to clear
			 */
			ns.clearDefer = function clearDefer(key) {
				delete ns.DeferKeys[key];
				if(Object.keys(ns.DeferKeys).length === 0) {
					setTimeout(() => document.getElementById("styGwLoad")?.remove(), 0);
				}
			}
			
			document.head.insertAdjacentHTML("beforeend", `
				<style id="styGwLoad">
					body {
						opacity: 0;
					}
					html {
						width: 100vw;
						height: 100vh;
						background-color: var(--veil-light-color, #E3E3E3) !important;
					}
					@media(prefers-color-scheme: dark) {
						html {
							background-color: var(--veil-dark-color, #242424) !important;
						}
					}
				</style>
			`);
			window.addEventListener("DOMContentLoaded", function onDOMContentLoadedVeil() {
				ns.clearDefer("DOMContentLoaded");
			});
		}) (window.GW.Controls.Veil = window.GW.Controls.Veil || {});
	</script>

	<link href="./Styles/variables.css" rel="stylesheet" type="text/css">
	<link href="./Styles/main.css" rel="stylesheet" type="text/css">

	<script src="./Scripts/ActionBatcherGizmo.js"></script>
	<script src="./Scripts/SVGIconControl.js"></script>
	<script src="./Scripts/SwitchControl.js"></script>
	<script src="./Scripts/ToasterControl.js"></script>
	
	<script src="./Scripts/Display.js"></script>
	<script src="./Scripts/Hangman.js"></script>
	<script src="./Scripts/KeyboardControl.js"></script>
	<script src="./Scripts/Words.js"></script>

	<link href="./Styles/index.css" rel="stylesheet" type="text/css">
	<script src="./Scripts/index.js"></script>
</head>
<body>
	<header>
		<div>
			<a class="hide-until-focus full" href="#main">Skip to content</a>
			<noscript><strong>This site may not function properly without JavaScript enabled.</strong></noscript>
			<a class="full" href="https://groundedwren.com/Pages/Games.html">Grounded Wren Games</a>
		</div>
		<div><h1>Hangman</h1></div>
		<div class="bubble-container">
			<button onclick="document.getElementById('diaInfo').showModal()">
				<gw-icon iconKey="circle-info" name="Instructions"></gw-icon>
			</button>
			<details class="bubbler">
				<summary>
					<gw-icon iconKey="gear" name="Settings"></gw-icon>
				</summary>
				<div class="bubble">
					<label>
						<gw-switch><input id="cbxDarkMode"
							type="checkbox"
							oninput="localStorage.setItem('theme', event.target.checked ? 'dark' : 'light');GW.Hangman.Display.updatePrefs();"
						></gw-switch>
						Dark mode
					</label>
				</div>
			</details>
			<button onclick="document.getElementById('diaNew').showModal()">New Game</button>
		</div>
	</header>
	<main id="main">
		<figure id="figHangman">
			<img>
			<figcaption></figcaption>
		</figure>
		<figure id="figWord"></figure>
		<gw-keyboard></gw-keyboard>
		<button onclick="GW.Hangman.revealWord()">Reveal Word</button>
	</main>
	<footer>
		<figure>
			<a href="https://www.groundedwren.com/" target="_blank">
				<img src="./Img/gw-button.png" alt="Grounded Wren 88x31 Button; white text on a swirling purple, red, and black background">
			</a>
			<figcaption>Created by Vera in 2025</figcaption>
		</figure>
	</footer>
	<dialog id="diaInfo">
		<article>
			<gw-icon iconKey="circle-info" name="info" tabindex="-1" role="heading" aria-level="1" autofocus></gw-icon>
			<article>
				<h2>Intro</h2>
				<p>
					Welcome to the Grounded Wren Hangman player!
				</p>
				<p>
					Hangman is a simple game that's traditionally played on pen and paper.
					 The goal is to guess a secret word one letter at a time.
					 If the secret word contains your guessed letter, its location in the word is revealed.
					 If it does not, a portion of a drawing of a hanging is rendered. If the drawing is completed, you lose!
				</p>
				<h2>Word Source</h2>
				<p>
					I got the list of words available in this game from the list used by the <a href="https://en.wikipedia.org/wiki/Dale%E2%80%93Chall_readability_formula" target="_blank">Dale-Chall readability formula</a>.
					 I pared it down only slightly.
				</p>
				<h2>Drawing Source</h2>
				<p>
					I drew all of the images ðŸ˜Š
				</p>
			</article>
			<footer>
				<a class="full" href="mailto:vera@groundedwren.com?subject=Hangman">Give feedback</a>
				<button onclick="document.getElementById('diaInfo').close();">Close</button>
			</footer>
		</article>
	</dialog>
	<dialog id="diaNew">
		<form id="frmNew"
			aria-labelledby="hNew"
			onsubmit="GW.Hangman.onNewGame(event);document.getElementById('diaNew').close();"
		>
			<h2 id="hNew">New Game</h2>
			<div class="input-grid">
				<label>
					<span>
						<gw-switch><input
							type="checkbox"
							name="useCustom"
							onclick="GW.Hangman.onCustomChecked(event)"
							autofocus
						></gw-switch>
						Custom word
					</span>
				</label>
				<label class="hidden">
					<span>Word:</span>
					<input type="text" name="customWord" maxlength="16" pattern="[a-z,A-Z]*">
				</label>
				<label>
					<span>Word length:</span>
					<input type="number" name="wordLength" required max="14" min="4" step="1" value="6">
				</label>
				<label>
					<span>Guess count:</span>
					<input type="number" name="guessCount" required max="16" min="2" step="1" value="8">
				</label>
				<label>
					<span>Image set:</span>
					<select name="imgSet">
						<option value="Hangman" selected>Hangman</option>
					</select>
				</label>
			</div>
			<footer>
				<button type="submit">Begin</button>
				<button type="button" onclick="document.getElementById('diaNew').close()">Cancel</button>
			</footer>
		</form>
	</dialog>
</body>
</html>